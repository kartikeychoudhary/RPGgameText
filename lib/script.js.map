{"version":3,"sources":["../src/script.js"],"names":["addToOutput","BR","defaultLine","environment","Environment","treasures","WeakMap","tresCoords","Set","_fileInput","x","y","navigate","stepX","stepY","coordiates","document","querySelector","innerHTML","findTreasure","findCoords","coords","get","name","value","pFileReader","file","reader","FileReader","Promise","resolve","reject","onload","event","target","readyState","DONE","JSON","parse","result","readAsText","_onFilesSelected","promise","arr_promises","i","files","length","push","all","main","enterEl","addEventListener","onclickEnter","coordinate1","add","set","coordinate2","onchange","then","processed_arr","results","coordinates","treasure","catch","error","console","log","Object","getOwnPropertySymbols","options","newLine","ouput","commands","outputOptions","stumbleUpon","poke"],"mappings":"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","file":"script.js","sourcesContent":["import {Environment} from \"./environment\";\nimport {options, print} from \"./additional\";\n\nconst BR = \"<br>\";\nconst defaultLine = \"+ Start your Journey now !!!\"\n\nvar environment = new Environment(\"Forest - \");\nvar treasures = new WeakMap();\nvar tresCoords = new Set();\nvar _fileInput;\n\nvar x=0, y=0;\n\nfunction navigate(stepX, stepY){\n    [x, y] = [x+stepX, y+stepY];\n\n    let coordiates= document.querySelector(\"#coordinates\");\n    coordiates.innerHTML = `${x}, ${y}`;\n\n    findTreasure();\n}\n\nfunction findTreasure(){\n    let findCoords;\n    for(let coords of tresCoords){\n        if(coords.x == x && coords.y == y){\n            findCoords = coords;\n        }\n    }\n\n    if(findCoords){\n        var {name, value} = treasures.get(findCoords);\n        if(value){\n            addToOutput(`You found a ${name} value (${value})`);\n        }\n    }\n}\n\nfunction pFileReader(file){\n    var reader = new FileReader();\n    return new Promise((resolve, reject)=> {\n        reader.onload = function(event){\n            if(event.target.readyState == FileReader.DONE){\n                resolve(JSON.parse(event.target.result));\n            }\n        };\n\n        if(file){\n            reader.readAsText(file, \"UTF-8\");\n        }\n    });\n}\n\nfunction _onFilesSelected(){\n    var promise = Promise.resolve();\n    var arr_promises = [];\n    for(var i=0; i<_fileInput.files.length;i++){\n        var file = _fileInput.files[i];\n        arr_promises.push(pFileReader(file));\n    }\n\n    return Promise.all(arr_promises);\n    // ? _fileInput.files.forEach(file => promise=promise.then(()=> pFileReader(file)));\n    // ? promise.then(()=> console.log(\"All Done\"));\n    \n    \n}\n\nfunction main(){\n    let enterEl = document.querySelector(\"#enter\");\n\n    enterEl.addEventListener(\"click\", onclickEnter, false);\n\n    addToOutput();\n\n    var coordinate1 = {x:2, y:2};\n    tresCoords.add(coordinate1);\n    treasures.set(coordinate1,{name:\"treasure_chest\",value:100});\n    var coordinate2 = {x:2, y:0};\n    tresCoords.add(coordinate2);\n    treasures.set(coordinate2,{name:\"medaillon\",value:10});\n\n    _fileInput = document.querySelector(\"#file\");\n    _fileInput.onchange = function(){\n        _onFilesSelected().then(function(processed_arr){\n            for(var results of processed_arr){\n                print(\"file\", results);\n            for(var result of results){\n                tresCoords.add(result.coordinates);\n                treasures.set(result.coordinates, result.treasure);\n                }  \n            }\n        }).catch(function(error){\n            print(\"file\", error);\n        });\n    };\n\n}\nmain();\nconsole.log(Object.getOwnPropertySymbols(options));\n\nexport function addToOutput(newLine=defaultLine){\n let ouput =document.querySelector(\"#output\");\n ouput.innerHTML += BR + newLine;\n print(newLine);\n}\n\nfunction onclickEnter(){\n    let commands = document.querySelector(\"#commands\");\n    \n    if(commands.value == \"help\"){\n       options.outputOptions(); \n    }else if(commands.value == \"left\"){\n        navigate(-1, 0);\n        addToOutput(environment.stumbleUpon());\n    }else if(commands.value == \"right\"){\n        navigate(1, 0);\n        addToOutput(environment.stumbleUpon());\n    }else if(commands.value == \"up\"){\n        navigate(0, 1);\n        addToOutput(environment.stumbleUpon());\n    }else if(commands.value == \"down\"){\n        navigate(0, -1);\n        addToOutput(environment.stumbleUpon());\n    }else if(commands.value == \"poke\"){\n        addToOutput(environment.poke());\n    }\n    else{\n        addToOutput(commands.value);\n    }\n}"]}